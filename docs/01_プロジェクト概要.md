# プロジェクト概要

## 目的
- Bun のセキュリティスキャナー API を利用し、組織専用の脅威インテリジェンスを基にパッケージインストールを制御するテンプレート。
- `scanner` 実装は脅威フィードを受け取り、Bun のインストール処理に対して致命的 (`fatal`) または警告 (`warn`) レベルのアドバイザリを返す。

## システム前提
- 開発ターゲット: Apple M4 (macOS 15.6.1)。ARM64 対応の Bun/Node/npm エコシステムを想定。
- JavaScript/TypeScript 実行環境として [Bun](https://bun.sh) を使用。

## 技術スタック
- 言語: TypeScript (ESNext ターゲット、Bun の `bun test` 実行環境)。
- 実行ランタイム: Bun (Security Scanner API, `bun test`, `bun publish` などを使用)。
- 型定義: `@types/bun` DevDependency。
- フォーマッタ: Biome 2 系。

## コード構造
- `src/index.ts`: `Bun.Security.Scanner` 準拠の `scanner` をエクスポート。脅威フィードのモックとフィルタリングロジックを含む。
- `src/boot/scanner.test.ts`: Bun の組み込みテストランナーで実行する E2E テスト。複数ケースで `scanner.scan` の挙動を検証。
- `README.md`: Bun Security Scanner テンプレートの概要、API の使い方、提供コマンドの説明。
- `tsconfig.json`: ESNext 設定、strict モード、`moduleResolution: bundler`、`noEmit` など Bun 向けのコンパイル設定。
- `package.json`: ライブラリとして配布する前提で `exports` を設定。DevDependencies のみ定義。

## エントリーポイント
- Bun がセキュリティスキャナーを読み込む際のエントリーポイントは `src/index.ts` でエクスポートされる `scanner` オブジェクト。
- 単体実行確認は `bun test` または `bun run src/index.ts`（動作確認用の手動呼び出し時）で対応可能。

## 今後の移行観点
- Rails への移行を見据える場合、脅威フィード取得・検証ロジックをサービス層に切り出し、I/O 層を Bun から Ruby (Rails) に置き換える想定で依存関係を整理する必要がある。
- 現状はモックデータがハードコードされているため、外部 API やストレージ接続部分を抽象化すると移行が容易になる。
